{% extends 'base.html.twig' %}

{% block title %}Posts{% endblock %}

{% block body %}
<div class="all-post">


    <div class="content-post">
        <div class="row">
            <div class="col-9">


                <h2 class="text-center"> {{post.title}}</h2>

            </div>
                
            <div class="col-3 user ">
                <a href=""> écrit par <img src="{{ asset('img/metier/design.png') }}" alt=""></a>
            </div>
            <div class="text-right p-2 m-2 mb-3">
                    <a href="{{ path('forum') }}" <i class="fas fa-arrow-circle-left"></i></a>
            </div>
            </div>
        <div class="content text-center p-4">
            <p>{{post.content}}</p>
        </div>
        <div class="container-commentaire p-3">
            {% for label, messages in app.flashes(['success', 'danger']) %}
                {% for message in messages %}
                    <div class="flash-{{ label }} bg-{{ label }} text-light p-3 rounded">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}
            <h2>Commentaires</h2>
            <div class="commentaire">
                {% for com in commentaires %}
                    {% if com.post.id == post.id %}
                    <div class="row justify-content-md-center" style="border: 1px solid #000;">
                        {{com.content}}
                    </div>  
                    <p>Ecrit par: {{ com.user.pseudo}}</p>
                    <p>Le: {{ com.date|date }}</p>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <div class="part-commentaire">
                    <!-- <form action="">
                    <label for="commentaire">Votre commentaire</label>
                    <textarea name="commentaire" id="" cols="30" rows="10"></textarea>
                    <button type="submit" class="btn btn-outline-success">Valider</button>
                    </form> -->
                    {{ form_start(commentaireUserCreate) }}

                    {{ form_end(commentaireUserCreate) }}

                </div> 
                {# formulaire pour ajouter un commentaire #}        
            {% else %}
            <div class="part-bouton-commenter">
                <p class="btn-commenter" href="" onclick="changeStyle('block');">Commenter</p>
            </div>
    </div>        
    <div class="login-post-container" id="login-post-all" >
    <form action="{{ path('app_login') }}" method="post">

        <input
            placeholder="Adresse e-mail"
            type="email"
            value=""
            name="email"
            id="inputEmail"
            class="form-control mb-3"
            required
            autofocus
        />

        <input
            placeholder="Mot de passe"
            type="password"
            name="password"
            id="inputPassword"
            class="form-control mb-3"
            required
        />
        <input
            type="hidden"
            name="_csrf_token"
            value="{{ csrf_token('authenticate') }}"
        />
        

        <div class="connex-div">
            <button class="btn-connexion" type="submit">Connexion</button>
        </div>
        <div class="line"></div>
        <div class="create-div">
            <a class="btncreate" href="{{ path('app_register') }}">Créer un compte</a>
        </div>
    </form>

    </div>
        {% endif %}
</div>

{% endblock %}

